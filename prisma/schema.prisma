generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model images {
  image_id   String            @id @default(uuid())
  image_url  String            @db.VarChar(255)
  board_id   String            
  image_type images_image_type @default(raw)
  created_at DateTime          @default(now()) @db.Timestamp(0)
  updated_at DateTime          @default(now()) @db.Timestamp(0)
  storyboard storyboard        @relation(fields: [board_id], references: [board_id], onDelete: Cascade, onUpdate: NoAction, map: "FK_IMAGES_STORYBOARD")

  @@index([board_id], map: "FK_IMAGES_STORYBOARD")
}

model storyboard {
  board_id   String   @id @default(uuid())
  user_id    String   
  board_name String   @db.VarChar(30)
  created_at DateTime @default(now()) @db.Timestamp(0)
  updated_at DateTime @default(now()) @db.Timestamp(0)
  images     images[]
  user       user     @relation(fields: [user_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction, map: "FK_STORYBOARD_USER")

  @@index([user_id], map: "FK_STORYBOARD_USER")
}

model user {
  user_id    String       @id @default(uuid())
  user_name  String       @db.VarChar(20) @unique
  storyboard storyboard[]
}

enum images_image_type {
  raw
  converted
  panorama
}
